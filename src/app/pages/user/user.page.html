<ion-content>
  <div class="ion-padding">
    <h2>{{ isEditing ? 'Editar Tarea' : 'Crear Tarea' }}</h2>
    
    <form [formGroup]="userForm" (ngSubmit)="saveUser()">
      <ion-item>
        <ion-label position="floating">Nombre</ion-label>
        <ion-input formControlName="nombre"></ion-input>
      </ion-item>
      
      <ion-item>
        <ion-label position="floating">Detalle</ion-label>
        <ion-textarea formControlName="detalle"></ion-textarea>
      </ion-item>
      <ion-item>
        <ion-label>Estado</ion-label>
        <ion-select formControlName="estado" multiple="true">
          <ion-select-option value="completado">Completado</ion-select-option>
          <ion-select-option value="pendiente">Pendiente</ion-select-option>
        </ion-select>
      </ion-item>
      
      <ion-button type="submit" expand="block" [disabled]="!userForm.valid">
        {{ isEditing ? 'Actualizar' : 'Guardar' }}
      </ion-button>
      
      <ion-button color="medium" expand="block" fill="outline" (click)="closeForm()">
        Cancelar
      </ion-button>
    </form>
    
    <ion-list>
      <ion-item-sliding *ngFor="let user of users">
        <ion-item>
          <ion-label>
            <h2>{{ user.nombre }}</h2>
            <p>{{ user.detalle }}</p>
          </ion-label>
        </ion-item>
        
        <ion-item-options side="end">
          <ion-item-option color="primary" (click)="editUser(user)">
            <ion-icon name="pencil" slot="icon-only"></ion-icon>
          </ion-item-option>
          
          <ion-item-option color="danger" (click)="deleteUser(user.id)">
            <ion-icon name="trash" slot="icon-only"></ion-icon>
          </ion-item-option>
        </ion-item-options>
      </ion-item-sliding>
    </ion-list>
  </div>
</ion-content>