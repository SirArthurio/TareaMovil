<ion-content>
  <div class="p-4">
    <h2 class="text-xl font-bold mb-4">{{ isEditing ? 'Editar Tarea' : 'Crear Tarea' }}</h2>
    
    <form [formGroup]="userForm" (ngSubmit)="saveUser()">
      <ion-item class="mb-3 rounded-lg shadow-sm">
        <ion-label position="floating">Nombre</ion-label>
        <ion-input formControlName="nombre" class="font-medium"></ion-input>
      </ion-item>
      
      <ion-item class="mb-3 rounded-lg shadow-sm">
        <ion-label position="floating">Detalle</ion-label>
        <ion-textarea formControlName="detalle" rows="3"></ion-textarea>
      </ion-item>
      
      <ion-item class="mb-4 rounded-lg shadow-sm">
        <ion-label>Estado</ion-label>
        <ion-select formControlName="estado" interface="popover">
          <ion-select-option value="pendiente">Pendiente</ion-select-option>
          <ion-select-option value="en_progreso">En progreso</ion-select-option>
          <ion-select-option value="completada">Completada</ion-select-option>
        </ion-select>
      </ion-item>
      
      <div class="flex flex-col gap-2">
        <ion-button type="submit" expand="block" [disabled]="!userForm.valid" 
                   class="font-medium">
          {{ isEditing ? 'Actualizar' : 'Guardar' }}
        </ion-button>
        
        <ion-button color="medium" expand="block" fill="outline" (click)="closeForm()"
                   class="font-medium">
          Cancelar
        </ion-button>
      </div>
    </form>
    
    <div class="mt-6">
      <h3 class="text-lg font-bold mb-2">Lista de Tareas</h3>
      
      <ion-list class="rounded-lg overflow-hidden shadow">
        <ion-item-sliding *ngFor="let task of users">
          <ion-item class="border-b">
            <div class="py-2">
              <h2 class="text-base font-semibold">{{ task.nombre }}</h2>
              <p class="text-sm text-gray-600">{{ task.detalle }}</p>
              <div class="mt-1">
                <span [ngClass]="{
                  'bg-yellow-100 text-yellow-800': task.estado === 'pendiente',
                  'bg-blue-100 text-blue-800': task.estado === 'en_progreso',
                  'bg-green-100 text-green-800': task.estado === 'completada'
                }" class="text-xs px-2 py-1 rounded-full">
                  {{ task.estado === 'pendiente' ? 'Pendiente' : 
                     task.estado === 'en_progreso' ? 'En progreso' : 'Completada' }}
                </span>
              </div>
            </div>
          </ion-item>
          
          <ion-item>
            <ion-button color="primary" (click)="editUser(task)">
              editar
            </ion-button>
            
            <ion-button color="danger" (click)="deleteUser(task.id)">
              eliminar
            </ion-button>
          </ion-item>
        </ion-item-sliding>
        
        <ion-item *ngIf="users.length === 0" lines="none">
          <div class="py-4 text-center w-full text-gray-500">
            No hay tareas disponibles
          </div>
        </ion-item>
      </ion-list>
    </div>
  </div>
</ion-content>